import { Rect } from 'types/Rect'

/**
 * Преобразует нормализованные координаты прямоугольника (в долях от изображения)
 * в реальные пиксельные значения, которые можно использовать для отрисовки.
 *
 * @param normalized Прямоугольник в нормализованных координатах: [x1, y1, x2, y2],
 *                   где значения от 0 до 1 (доля от ширины/высоты изображения).
 * @param imgWidth Ширина изображения в пикселях.
 * @param imgHeight Высота изображения в пикселях.
 * @returns Прямоугольник в пикселях: [x, y, width, height].
 */
export const NormalizeToPixels = (
	normalized: Rect,
	imgWidth: number,
	imgHeight: number
): Rect => {
	// Распаковываем координаты из нормализованного прямоугольника
	const [x, y, right, bottom] = normalized

	// Преобразуем:
	// x * ширина → пиксельная координата по оси X (левый верхний угол)
	// y * высота → пиксельная координата по оси Y (левый верхний угол)
	// (right - x) * ширина → ширина прямоугольника в пикселях
	// (bottom - y) * высота → высота прямоугольника в пикселях
	return [
		x * imgWidth,                    // X-координата левого верхнего угла в пикселях
		y * imgHeight,                   // Y-координата левого верхнего угла в пикселях
		(right - x) * imgWidth,          // ширина прямоугольника в пикселях
		(bottom - y) * imgHeight         // высота прямоугольника в пикселях
	]
}
