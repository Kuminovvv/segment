# VNIIGAZ Segment

Библиотека для работы с сегментами поверх изображений. Компонент предоставляет канвас, на котором можно добавлять, перемещать и сортировать прямоугольные области, получать информацию о выбранном сегменте и экспортировать повернутое изображение.

## Сборка
```bash
npm install
npm run build:dev   # дев-версия
npm run build:prod  # прод-версия
```

## Архитектура
- `src/features/image-highlighter` — ядро библиотеки (компонент, хуки, отрисовка, модель данных).
- `src/shared` — переиспользуемые утилиты (геометрия, канвас, масштабирование).
- Экспорт осуществляется из `src/index.ts`.

Компонент реализован как `forwardRef` и предоставляет `ImageHighlighterRef` с методами для управления сегментами, сортировкой и работой с изображением.

## Разработка
- Логика взаимодействия с канвасом вынесена в `useCanvasController`.
- Отрисовка выполняется в `useRenderLoop` с использованием offscreen-канваса для фона.
- Все операции над прямоугольниками проходят через модель `rectangles.ts`, что обеспечивает единые правила сортировки и синхронизации с внешними колбэками.

Подробные правила по качеству кода и процессу описаны в [CONTRIBUTING.md](./CONTRIBUTING.md).
