# Image Highlighter Module

Компонент разметки изображений предназначен для точного выделения сегментов на канвасе и масштабируем при росте требований к производительности. Проект построен по модульной схеме: фундаментальные примитивы вынесены в `core`, прикладная логика — в `modules`, а публичный API минимален и прозрачен для интеграции.

## Возможности
- отрисовка исходного изображения в оффскрин-слое и показ результата на главном канвасе без потери FPS;
- создание, перемещение и изменение размеров прямоугольников в нормализованных координатах;
- отображение номера сегмента, подсветка выбранного элемента и ручек управления;
- контекстное меню с действиями добавления и удаления сегментов;
- реф-API для управления выбором, сортировкой, нормализацией высоты и вращением изображения;
- экспорт повернутого изображения в `Blob` с сохранением качества.

## Быстрый старт
```bash
npm install
npm run build:prod
```

Во время разработки удобно использовать режим наблюдения:
```bash
npm run watch
```

Черновую сборку под разработку можно собрать так:
```bash
npm run build:dev
```

## Структура исходников
- `src/core` — независимые от домена примитивы: геометрия, канвас, общие типы и утилиты;
- `src/modules/highlighter`
  - `api` — точка входа модуля и публичные реэкспорты;
  - `components` — UI-слой, подключающий контроллеры и инфраструктуру;
  - `controllers` — композиция бизнес-логики и обработчиков событий;
  - `domain` — правила сортировки и генерации новых сегментов;
  - `infrastructure` — работа с DOM: загрузка изображения, оффскрин-канвас, рендеринг;
  - `renderers` — низкоуровневые функции рисования канваса.
- `src/pkg` — совместимость с историческими путями импорта;
- `src/index.ts` — публичное API библиотеки.

## Публикация
```bash
npm publish --registry=https://nexus.vniigaz.local/repository/npm-releases/
```

## Версионирование
Следуем `MAJOR.MINOR.PATCH` и фиксируем изменения в git.

## Обратная связь
Улучшения и предложения отправляйте через корпоративную систему задач.
