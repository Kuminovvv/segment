# Image Highlighter Module

Библиотека предоставляет высокопроизводительный компонент для разметки изображений прямоугольными сегментами. Новая архитектура
строится вокруг чистых хуков и модульной системы отрисовки, что обеспечивает предсказуемость поведения и лёгкую расширяемость.

## Основные возможности
- загрузка и отрисовка изображений с использованием оффскрин-подложки для снижения нагрузки на главный поток;
- добавление, перемещение и изменение размеров сегментов в нормализованных координатах;
- отображение порядковых номеров, подсветки выбранного сегмента и подсказок при наведении на ручки;
- контекстное меню с возможностью добавления и удаления сегментов без прямой работы с состоянием компонента;
- API через `ref` для программного управления сегментами, сортировки, нормализации высоты и поворота изображения;
- экспорт повёрнутого изображения в виде `Blob` с учётом текущего угла вращения.

## Установка и сборка
```bash
npm install
npm run build:prod
```

Для локальной разработки доступна сборка с наблюдением:
```bash
npm run watch
```

Черновая сборка, использующая конфигурацию разработки, запускается командой:
```bash
npm run build:dev
```

## Структура проекта
- `src/shared` — переиспользуемые утилиты и определения типов, независимые от конкретных фич;
- `src/features/highlighter` — доменный модуль размечателя изображений с компонентами, хуками, моделями и рендерами:
  - `components` — React-компоненты публичного уровня;
  - `hooks` — бизнес-логика и контроллер состояния;
  - `model` — функции работы с данными (сортировка, фабрики сегментов);
  - `renderers` — низкоуровневые процедуры отрисовки.
- `src/pkg` — совместимость с прежним путём импорта, переэкспортирующая основной компонент;
- `src/index.ts` — публичная точка входа в библиотеку.

## Публикация пакета
```bash
npm publish --registry=https://nexus.vniigaz.local/repository/npm-releases/
```

## Версионирование
Проект следует семантическому версионированию `MAJOR.MINOR.PATCH`.

## Обратная связь
Предложения и замечания по развитию модуля направляйте через корпоративную систему задач.
